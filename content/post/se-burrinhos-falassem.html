---
title: "E se os burrinhos falassem?"
date: 2017-12-10T02:55:18-03:00
draft: false
---
<!DOCTYPE html>
<html lang="pt-br">

  <head>
    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <script src="libraries/radar-chart-d3/src/radar-chart.js"></script>
  </head>

  <body>
    <div class="container">
      <p>
        Esses dias eu estava passando pelo Açude Velho, um ponto bastante famoso aqui em Campina Grande,
        e me deparei com algumas esculturas bem características e que são cartões postais dessa cidade.
        Eu me pus a pensar, enquanto observava as esculturas, como seria o dia a dia delas, o que elas
        viam todos os dias e qual seria a impressão da cidade, movimentação de pessoas e sua diversidade.
      </p>
      <p>
        Se os burrinhos pudessem falar, qual história eles nos contariam?
      </p>
      <p>
        Os dados foram coletados pelo pessoal do <a href="https://www.facebook.com/LabRua/">LabRua</a>
        e incluem dois pontos turísticos da cidade de Campina Grande: O
        <a href="http://s2.glbimg.com/ui3kJ5T3lugqlmGDGMIWCxt0lGU=/620x465/s.glbimg.com/jo/g1/f/original/2015/09/24/monumento150anos_campinagrande.jpg">Monumento aos 150 anos de Campina Grande (Burrinhos)</a>,
         <a href="http://www.paraibacriativa.com.br/wp-content/uploads/2015/09/pioneiros-da-borborema-1.jpg">Os pioneiros da Borborema (Jackson)</a>
         e o <a href="http://i1083.photobucket.com/albums/j400/max_mx28/DSC02372_zpsir953n3g.jpg">Bobs do Açude Velho</a>.
         Algumas coisas que fiquei imaginando foram "Qual será o horário em que eles vêem mais pessoas?" e
         "Qual desses três lugares é o mais popular/mais visitado?". Através da visualização abaixo podemos ter uma noção:
      </p>
      <div class="chart-container" id="chart-container"></div>
      <p>
        Podemos perceber de cara que dos três pontos analisados, os burrinhos vêem mais pessoas, é o mais popular
        destes. O Bobs e o Jackson vêem uma quantidade parecida de pessoas, porém o Bobs parece receber mais visitas.
      </p>
      <p>
        Os burrinhos têm seu horário de pico às 8h da manhã, seguido de picos às 7h da manhã,
        9h, 11h30min, 14h e 17h15min. A explicação para isso é que este monumento fica em um cruzamento, logo
        esses horários são comuns para quem se desloca em direção ao trabalho, escola ou universidade.
        Dessa forma, como os horários de início de atividade dessas instituições se dão comumente nestes horários,
        é comum que haja um fluxo maior de pessoas.
      </p>
      <p>
        Esse gráfico contabilizou veículos motorizados e pedestres, ou seja, considerou todas as pessoas vistas
        pelos monumentos.
      </p>
      <h2>
        Quem domina a pista? Carros ou motos?
      </h2>
      <div class="carros-motos-container" id="carros-motos-container"></div>

      <style>

      .arc text {
        font: 10px sans-serif;
        text-anchor: middle;
      }

      .arc path {
        stroke: #fff;
      }

      </style>

      <script>

      var width = 960,
          height = 500,
          radius = Math.min(width, height) / 2;

      var color = d3.scale.ordinal()
          .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

      var arc = d3.svg.arc()
          .outerRadius(radius - 10)
          .innerRadius(radius - 70);

      var pie = d3.layout.pie()
          .sort(null)
          .value(function(d) { return d.quant_veiculos; });

      var svg = d3.select("#carros-motos-container").append("svg")
          .attr("width", width)
          .attr("height", height)
        .append("g")
          .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

      d3.csv("data/pie_chart.csv", type, function(error, data) {
        if (error) throw error;

        var g = svg.selectAll(".arc")
            .data(pie(data))
          .enter().append("g")
            .attr("class", "arc");

        g.append("path")
            .attr("d", arc)
            .style("fill", function(d) { return color(d.data.veiculos); });

        g.append("text")
            .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
            .attr("dy", ".35em")
            .text(function(d) { return d.data.veiculos; });
      });

      function type(d) {
        d.quant_veiculos = +d.quant_veiculos;
        return d;
      }

      </script>

      <h2>
        Há uma diferença numérica entre homens e mulheres na rua?
      </h2>
      <div class="diff-chart" id="diff-chart"></div>

      <style>
        .diff-chart .axis path,
        .diff-chart .axis line {
          fill: none;
          stroke: #000;
          shape-rendering: crispEdges;
        }

        .diff-chart .x.axis path {
          display: none;
        }

        .area.above {
          fill: rgb(252,141,89);
        }

        .area.below {
          fill: MediumPurple;
        }

        .diff-chart .line {
          fill: none;
          stroke: #000;
          stroke-width: 1.5px;
        }
      </style>

      <script>
        var margin = {top: 20, right: 20, bottom: 30, left: 50},
            width = 960 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        var x = d3.time.scale()
            .range([0, width]);

        var y = d3.scale.linear()
            .range([height, 0]);

        var xAxis = d3.svg.axis()
            .scale(x)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");

        var line = d3.svg.area()
            .interpolate("basis")
            .x(function(d) { return x(d.date); })
            .y(function(d) { return y(d["n_homens"]); });

        var area = d3.svg.area()
            .interpolate("basis")
            .x(function(d) { return x(d.date); })
            .y1(function(d) { return y(d["n_homens"]); });

        var svg = d3.select("#diff-chart").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        d3.json("data/diff_char.json", function(error, data) {
          if (error) throw error;

          var today = new Date();
          today.setHours(0, 0, 0, 0);
          var todayMillis = today.getTime();

          data.forEach(function(d) {
            var parts = d.date.split(":");
            var timePeriodMillis = (parseInt(parts[0], 10) * 60 * 60 * 1000) +
              (parseInt(parts[1], 10) * 60 * 1000);

            d.date = new Date();
            d.date.setTime(todayMillis + timePeriodMillis);

            d["n_homens"]= +d["n_homens"];
            d["n_mulheres"] = +d["n_mulheres"];
          });

          x.domain(d3.extent(data, function(d) { return d.date; }));

          y.domain([
            d3.min(data, function(d) { return Math.min(d["n_homens"], d["n_mulheres"]); }),
            d3.max(data, function(d) { return Math.max(d["n_homens"], d["n_mulheres"]); })
          ]);

          svg.datum(data);

          svg.append("clipPath")
              .attr("id", "clip-below")
            .append("path")
              .attr("d", area.y0(height));

          svg.append("clipPath")
              .attr("id", "clip-above")
            .append("path")
              .attr("d", area.y0(0));

          svg.append("path")
              .attr("class", "area above")
              .attr("clip-path", "url(#clip-above)")
              .attr("d", area.y0(function(d) { return y(d["n_mulheres"]); }));

          svg.append("path")
              .attr("class", "area below")
              .attr("clip-path", "url(#clip-below)")
              .attr("d", area);

          svg.append("path")
              .attr("class", "line")
              .attr("d", line);

          svg.append("g")
              .attr("class", "x axis")
              .attr("transform", "translate(0," + height + ")")
              .call(xAxis);

          svg.append("g")
              .attr("class", "y axis")
              .call(yAxis)
            .append("text")
              .attr("transform", "rotate(-90)")
              .attr("y", 6)
              .attr("dy", ".71em")
              .style("text-anchor", "end")
              .text("Quantidade de pessoas (Pedestres e ciclistas)");
        });
      </script>

      <style>
        .chart-container .area {
          fill-opacity: 0.7;
        }
        .chart-container.focus .area {
          fill-opacity: 0.3;
        }
        .chart-container.focus .area.focused {
          fill-opacity: 0.9;
        }
        .chart-container.area.burrinhos, .burrinhos .circle {
          fill: #FFD700;
          stroke: none;
        }
        .chart-container.area.jackson, .jackson .circle {
          fill: #ADD8E6;
          stroke: none;
        }
      </style>

      <script>

        d3.json('data/radar_data.json', function(dados){
          RadarChart.draw(".chart-container", dados);
        });

      </script>

    </div>

  </body>

</html>
